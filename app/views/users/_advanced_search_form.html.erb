<%- @users_search = Search.new %>
<% params_key = params[:advanced_search] unless params_key.nil? %>
<aside class="row" style="padding-top: 20px">
  <%= simple_form_for @users_search, as: :advanced_search, url: users_path, method: :get, input_html: {class: 'form-group'} do |f| %>
      <%= f.input :search, input_html:{ id: 'advanced_keywords', class: 'form-control input-sm', data: {autocomplete_source: User.order(:first_name).map{ |u| "#{u.first_name} #{u.last_name}" }}} %>
      <%= f.input :location,  collection: User.all.uniq.map { |r| [r.location, r.location] }, include_blank: true, input_html:{class: 'form-control input-sm'}, selected: params_key[:location]%>
      <%= f.input :languages, collection: User.all.uniq.map { |r| [r.languages, r.languages] }, include_blank: true, input_html:{class: 'form-control input-sm'}, selected: params_key[:languages] %>
      <%= f.submit 'Search', class: 'btn btn-success' %>
  <% end %>
  <%= %>
</aside>